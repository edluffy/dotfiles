call plug#begin('~/.vim/plugged')
Plug 'neoclide/coc.nvim', {'branch': 'release'}
Plug 'junegunn/goyo.vim'
Plug 'kaicataldo/material.vim', { 'branch': 'main' }
Plug 'ayu-theme/ayu-vim'
call plug#end()

let g:coc_global_extensions = ['coc-clangd', 'coc-pyright', 'coc-texlab', 'coc-git', 'coc-lists', 'coc-yank']

" Sensible defaults for writing text
filetype plugin indent on
set autoindent
set backspace=indent,eol,start
set smarttab
set clipboard^=unnamed
set signcolumn=yes
set shortmess+=c
set incsearch

" Sensible defaults for UI appearance
syntax enable
set termguicolors
set laststatus=2
set noshowmode
set number
set ruler
set wildmenu
set undofile
set splitright
match CursorLineNr '\%>80v.\+'

" Theming
let ayucolor="light"
let g:material_theme_style = 'palenight'
let g:material_terminal_italics = 1
colorscheme material
highlight EndOfBuffer guifg=bg

" Tweaks to speed up vim
set synmaxcol=180
set updatetime=300

highlight CocErrorSign guifg=#ff5370 ctermfg=203
highlight CocHintSign guifg=#82ddff ctermfg=111
highlight CocInfoSign guifg=#ffcb6b ctermfg=11
call coc#config('diagnostic.errorSign', 'ⓧ ')
call coc#config('diagnostic.hintSign', 'ⓘ ')
call coc#config('diagnostic.infoSign', 'ⓘ ')

" Leader key mappings
let mapleader = "\<Space>"
nmap <leader><leader> :source $MYVIMRC<cr>
nmap <leader>g :CocList grep<cr>
nmap <leader>o :CocList --tab --auto-preview outline<cr>

nmap <silent> gd <Plug>(coc-definition)
nmap <silent> gy <Plug>(coc-type-definition)
nmap <silent> gi <Plug>(coc-implementation)
nmap <silent> gr <Plug>(coc-references)

" Surround
vnoremap <silent> ( xi()<esc>P
vnoremap <silent> [ xi[]<esc>P
vnoremap <silent> { xi{}<esc>P
vnoremap <silent> ' xi''<esc>P
vnoremap <silent> " xi""<esc>P

" Text Objects
xnoremap <silent> il :<c-u>normal! g_v^<cr>
onoremap <silent> il :<c-u>normal! g_v^<cr>
xnoremap <silent> al :<c-u>normal! $v0<cr>
onoremap <silent> al :<c-u>normal! $v0<cr>

xnoremap <silent> id :<c-u>normal! G$Vgg0<cr>
onoremap <silent> id :<c-u>normal! GVgg<cr>

xmap if <Plug>(coc-funcobj-i)
omap if <Plug>(coc-funcobj-i)
xmap af <Plug>(coc-funcobj-a)
omap af <Plug>(coc-funcobj-a)
xmap ic <Plug>(coc-classobj-i)
omap ic <Plug>(coc-classobj-i)
xmap ac <Plug>(coc-classobj-a)
omap ac <Plug>(coc-classobj-a)

" Navigation
nnoremap <C-J> <C-W><C-J>
nnoremap <C-K> <C-W><C-K>
nnoremap <C-L> <C-W><C-L>
nnoremap <C-H> <C-W><C-H>

set statusline=
set statusline+=%#StatusLineTerm#%{(mode()=='i')?'\ \ INSERT\ ':''}
set statusline+=%#TermCursor#
set statusline+=%{(mode()=='n')?'\ \ NORMAL\ ':''}
set statusline+=%{(mode()=='v')?'\ \ VISUAL\ ':''}
set statusline+=%{(mode()=='')?'\ \ V·BLOCK\ ':''}
set statusline+=%{(mode()=='c')?'\ \ COMMAND\ ':''}

set statusline+=%*\ %<%f%m%r%h%w\                    " File path, modified, readonly, helpfile, preview
set statusline+=│\ %Y\                               " Separator
set statusline+=%=                                   " Right Side
set statusline+=\ col:\ %02v\                        " Colomn number
set statusline+=│                                    " Separator
set statusline+=\ ln:\ %02l/%L\ (%p%%)\              " Line number / total lines, percentage of document
